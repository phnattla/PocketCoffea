default_jets_calibration:
  jec_name_map_MC:
    JetPt: pt
    JetMass: mass
    JetEta: eta
    JetPhi: phi
    JetA: area
    ptGenJet: pt_gen
    ptRaw: pt_raw
    massRaw: mass_raw
    Rho: event_rho
    METpt: pt
    METphi: phi
    UnClusteredEnergyDeltaX: MetUnclustEnUpDeltaX
    UnClusteredEnergyDeltaY: MetUnclustEnUpDeltaY
  jec_name_map_Data:
    JetPt: pt
    JetMass: mass
    JetEta: eta
    JetPhi: phi
    JetA: area
    ptRaw: pt_raw
    massRaw: mass_raw
    Rho: event_rho
    METpt: pt
    METphi: phi
    UnClusteredEnergyDeltaX: MetUnclustEnUpDeltaX
    UnClusteredEnergyDeltaY: MetUnclustEnUpDeltaY

  factory_files_dir: ${default_params_dir:}/jec/

  factory_configuration_MC:
    AK4PFchs:
      JES_JER_Syst:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL16APV_V7_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_Uncertainty_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL16_V7_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_Uncertainty_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL17_V5_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_Uncertainty_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"

        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL18_V5_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_Uncertainty_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_SF_AK4PFchs.jersf.txt.gz"

      ####################################################################################
      JES_JER_noJESSyst:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_SF_AK4PFchs.jersf.txt.gz"
          
        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_PtResolution_AK4PFchs.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_SF_AK4PFchs.jersf.txt.gz"


      #################################################################################       
      JES_noJER:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL16APV_V7_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_Uncertainty_AK4PFchs.junc.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL16_V7_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_Uncertainty_AK4PFchs.junc.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL17_V5_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_Uncertainty_AK4PFchs.junc.txt.gz"
          
        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK4PFchs.jec.txt.gz"
          - "${default_params_dir:}/jec/RegroupedV2_Summer19UL18_V5_MC_UncertaintySources_AK4PFchs.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_Uncertainty_AK4PFchs.junc.txt.gz"

     

    #===============================================================    
    #===============================================================
    # Ak8 jets
    AK8PFPuppi:
      JES_JER_Syst:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"
          
        
        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_SF_AK8PFPuppi.jersf.txt.gz"

      ####################################################################################
      JES_JER_noJESSyst:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer20UL16_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_JRV3_MC_SF_AK8PFPuppi.jersf.txt.gz"
          
        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_PtResolution_AK8PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_JRV2_MC_SF_AK8PFPuppi.jersf.txt.gz"

      #################################################################################       
      JES_noJER:
        2016_PreVFP:
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16APV_V7_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"

        2016_PostVFP:
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL16_V7_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"

        "2017":
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL17_V5_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"
          
        "2018":
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L1FastJet_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_L2Relative_AK8PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_UncertaintySources_AK8PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer19UL18_V5_MC_Uncertainty_AK8PFPuppi.junc.txt.gz"

      
    AK4PFPuppi:
      JES_JER_Syst:
        2022_preEE:
          - "${default_params_dir:}/jec/Summer22/Summer22_22Sep2023_V2_MC_L1FastJet_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer22/Summer22_22Sep2023_V2_MC_L2Relative_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer22/Summer22_22Sep2023_V2_MC_UncertaintySources_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer22/Summer22_22Sep2023_V2_MC_Uncertainty_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer22/Summer22Run3_V1_MC_PtResolution_AK4PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer22/Summer22Run3_V1_MC_SF_AK4PFPuppi.jersf.txt.gz"

        2022_postEE:
          - "${default_params_dir:}/jec/Summer22EE/Summer22EE_22Sep2023_V2_MC_L1FastJet_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer22EE/Summer22EE_22Sep2023_V2_MC_L2Relative_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer22EE/Summer22EE_22Sep2023_V2_MC_UncertaintySources_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer22EE/Summer22EE_22Sep2023_V2_MC_Uncertainty_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer22EE/Summer22EEPrompt22_JRV1_MC_PtResolution_AK4PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer22EE/Summer22EEPrompt22_JRV1_MC_SF_AK4PFPuppi.jersf.txt.gz"

        2023_preBPix:
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_V1_MC_L1FastJet_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_V1_MC_L2Relative_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_V1_MC_UncertaintySources_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_V1_MC_Uncertainty_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_JRV1_MC_PtResolution_AK4PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_JRV1_MC_SF_AK4PFPuppi.jersf.txt.gz"

        2023_postBPix:
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_V1_MC_L1FastJet_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_V1_MC_L2Relative_AK4PFPuppi.jec.txt.gz"
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_V1_MC_UncertaintySources_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_V1_MC_Uncertainty_AK4PFPuppi.junc.txt.gz"
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_JRV1_MC_PtResolution_AK4PFPuppi.jr.txt.gz"
          - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_JRV1_MC_SF_AK4PFPuppi.jersf.txt.gz"

  ########################## Data ########################################
  factory_configuration_Data:
    # AK4PFchs:
      # JES:
    #     "2018":
    #       A:
    #         - "${default_params_dir:}/jec/Summer19UL18_RunA_V5_DATA/Summer19UL18_RunA_V5_DATA_L1FastJet_AK4PFchs.txt.gz"
    #         - "${default_params_dir:}/jec/Summer19UL18_RunA_V5_DATA/Summer19UL18_RunA_V5_DATA_L2Relative_AK4PFchs.txt.gz" #MC truth: https://twiki.cern.ch/twiki/bin/viewauth/CMS/IntroToJEC#L2L3_MC_truth_corrections_old_L2
    #         - "${default_params_dir:}/jec/Summer19UL18_RunA_V5_DATA/Summer19UL18_RunA_V5_DATA_L2L3Residual_AK4PFchs.txt.gz"
    #       B:
    #         - "${default_params_dir:}/jec/Summer19UL18_RunB_V5_DATA/Summer19UL18_RunB_V5_DATA_L1FastJet_AK4PFchs.txt.gz"
    #         - "${default_params_dir:}/jec/Summer19UL18_RunB_V5_DATA/Summer19UL18_RunB_V5_DATA_L2Relative_AK4PFchs.txt.gz" #MC truth: https://twiki.cern.ch/twiki/bin/viewauth/CMS/IntroToJEC#L2L3_MC_truth_corrections_old_L2
    #         - "${default_params_dir:}/jec/Summer19UL18_RunB_V5_DATA/Summer19UL18_RunB_V5_DATA_L2L3Residual_AK4PFchs.txt.gz"
    #       C:
    #         - "${default_params_dir:}/jec/Summer19UL18_RunC_V5_DATA/Summer19UL18_RunC_V5_DATA_L1FastJet_AK4PFchs.txt.gz"
    #         - "${default_params_dir:}/jec/Summer19UL18_RunC_V5_DATA/Summer19UL18_RunC_V5_DATA_L2Relative_AK4PFchs.txt.gz" #MC truth: https://twiki.cern.ch/twiki/bin/viewauth/CMS/IntroToJEC#L2L3_MC_truth_corrections_old_L2
    #         - "${default_params_dir:}/jec/Summer19UL18_RunC_V5_DATA/Summer19UL18_RunC_V5_DATA_L2L3Residual_AK4PFchs.txt.gz"
    #       D:
    #         - "${default_params_dir:}/jec/Summer19UL18_RunD_V5_DATA/Summer19UL18_RunD_V5_DATA_L1FastJet_AK4PFchs.txt.gz"
    #         - "${default_params_dir:}/jec/Summer19UL18_RunD_V5_DATA/Summer19UL18_RunD_V5_DATA_L2Relative_AK4PFchs.txt.gz" #MC truth: https://twiki.cern.ch/twiki/bin/viewauth/CMS/IntroToJEC#L2L3_MC_truth_corrections_old_L2
    #         - "${default_params_dir:}/jec/Summer19UL18_RunD_V5_DATA/Summer19UL18_RunD_V5_DATA_L2L3Residual_AK4PFchs.txt.gz"
    AK4PFPuppi:
      JES:
        2022_preEE:
          C:
            - "${default_params_dir:}/jec/Summer22/Summer22-22Sep2023_RunCD_V2_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22/Summer22-22Sep2023_RunCD_V2_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22/Summer22-22Sep2023_RunCD_V2_DATA_L2L3Residual_AK4PFPuppi.txt.gz"

          D: "${default_jets_calibration.factory_configuration_Data.AK4PFPuppi.JES.2022_preEE.C}"
                 
        2022_postEE:
          E:
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunE_V2_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunE_V2_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunE_V2_DATA_L2L3Residual_AK4PFPuppi.txt.gz"
          F:
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunF_V2_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunF_V2_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunF_V2_DATA_L2L3Residual_AK4PFPuppi.txt.gz"
          G:
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunG_V2_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunG_V2_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer22EE/Summer22EE-22Sep2023_RunG_V2_DATA_L2L3Residual_AK4PFPuppi.txt.gz"

        2023_preBPix:
          Cv1:
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv123_V1_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv123_V1_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv123_V1_DATA_L2L3Residual_AK4PFPuppi.txt.gz"
          Cv2: "${default_jets_calibration.factory_configuration_Data.AK4PFPuppi.JES.2023_preBPix.Cv1}"
          Cv3: "${default_jets_calibration.factory_configuration_Data.AK4PFPuppi.JES.2023_preBPix.Cv1}"
          Cv4:
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv4_V1_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv4_V1_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23/Summer23Prompt23_RunCv4_V1_DATA_L2L3Residual_AK4PFPuppi.txt.gz"
          

        2023_postBPix:
          D:
            - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_RunD_V1_DATA_L1FastJet_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_RunD_V1_DATA_L2Relative_AK4PFPuppi.txt.gz"
            - "${default_params_dir:}/jec/Summer23BPix/Summer23BPixPrompt23_RunD_V1_DATA_L2L3Residual_AK4PFPuppi.txt.gz"
  jec_correctionlib:
    2016_PreVFP:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2016preVFP_UL/jet_jerc.json.gz"
      jec_mc: Summer19UL16_V7_MC
      jec_data: Summer19UL16_RunFGH_V7_DATA
      jec_levels:
        - L1FastJet
        - L2Relative
      jer: Summer20UL16_JRV3_MC
      junc:
        - FlavorQCD
        - FlavorPureBottom
        - FlavorPureQuark
        - FlavorPureGluon
        - FlavorPureCharm
        - Regrouped_BBEC1
        - Regrouped_Absolute
        - Regrouped_RelativeBal
        - RelativeSample

    2016_PostVFP:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2016postVFP_UL/jet_jerc.json.gz"
      jec_mc: Summer19UL16APV_V7_MC
      jec_data:
        B: Summer19UL16APV_RunBCD_V7_DATA
        C: "${default_jets_calibration.jec_correctionlib.2016_PostVFP.jec_data.B}"
        D: "${default_jets_calibration.jec_correctionlib.2016_PostVFP.jec_data.B}"
        E: Summer19UL16APV_RunEF_V7_DATA
        F: "${default_jets_calibration.jec_correctionlib.2016_PostVFP.jec_data.E}"
      jec_levels: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.jec_levels}"
      jer: Summer20UL16APV_JRV3_MC
      junc: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.junc}"

    "2017":
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2017_UL/jet_jerc.json.gz"
      jec_mc: Summer19UL17_V5_MC
      jec_data:
        B: Summer19UL17_RunB_V5_DATA
        C: Summer19UL17_RunC_V5_DATA
        D: Summer19UL17_RunD_V5_DATA
        E: Summer19UL17_RunE_V5_DATA
        F: Summer19UL17_RunF_V5_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.jec_levels}"
      jer: Summer19UL17_JRV2_MC
      junc: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.junc}"

    "2018":
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2018_UL/jet_jerc.json.gz"
      jec_mc: Summer19UL18_V5_MC
      jec_data:
        A: Summer19UL18_RunA_V5_DATA
        B: Summer19UL18_RunB_V5_DATA
        C: Summer19UL18_RunC_V5_DATA
        D: Summer19UL18_RunD_V5_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.jec_levels}"
      jer: Summer19UL18_JRV2_MC
      junc: "${default_jets_calibration.jec_correctionlib.2016_PreVFP.junc}"

    2022_preEE:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2022_Summer22/jet_jerc.json.gz"
      jec_mc: Summer22_22Sep2023_V2_MC
      jec_data: Summer22_22Sep2023_RunCD_V2_DATA
      jec_levels:
        - L1FastJet
        - L2Relative
        - L3Absolute
        - L2L3Residual
      jer: Summer22_22Sep2023_JRV1_MC
      junc:
        - AbsoluteMPFBias
        - AbsoluteScale
        - FlavorQCD
        - Fragmentation
        - PileUpDataMC
        - PileUpPtBB
        - PileUpPtEC1
        - PileUpPtEC2
        - PileUpPtHF
        - PileUpPtRef
        - RelativeFSR
        - RelativeJERHF
        - RelativePtBB
        - RelativePtHF
        - RelativeBal
        - SinglePionECAL
        - SinglePionHCAL
        - AbsoluteStat
        - RelativeJEREC1
        - RelativeJEREC2
        - RelativePtEC1
        - RelativePtEC2
        - TimePtEta
        - RelativeSample
        - RelativeStatEC
        - RelativeStatFSR
        - RelativeStatHF
        - Total

    2022_postEE:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2022_Summer22EE/jet_jerc.json.gz"
      jec_mc: Summer22EE_22Sep2023_V2_MC
      jec_data:
        E: Summer22EE_22Sep2023_RunE_V2_DATA
        F: Summer22EE_22Sep2023_RunF_V2_DATA
        G: Summer22EE_22Sep2023_RunG_V2_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2022_preEE.jec_levels}"
      jer: Summer22EE_22Sep2023_JRV1_MC
      junc: "${default_jets_calibration.jec_correctionlib.2022_preEE.junc}"

    2023_preBPix:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2023_Summer23/jet_jerc.json.gz"
      jec_mc: Summer23Prompt23_V2_MC
      jec_data: Summer23Prompt23_V2_DATA
        # Cv1: Summer23Prompt23_RunCv123_V1_DATA
        # Cv2: "${default_jets_calibration.jec_correctionlib.2023_preBPix.jec_data.Cv1}"
        # Cv3: "${default_jets_calibration.jec_correctionlib.2023_preBPix.jec_data.Cv1}"
        # Cv4: Summer23Prompt23_RunCv4_V1_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2022_preEE.jec_levels}"
      jer: Summer23Prompt23_RunCv1234_JRV1_MC
      junc: "${default_jets_calibration.jec_correctionlib.2022_preEE.junc}"

    2023_postBPix:
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2023_Summer23BPix/jet_jerc.json.gz"
      jec_mc: Summer23BPixPrompt23_V3_MC
      jec_data: Summer23BPixPrompt23_RunD_V3_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2022_preEE.jec_levels}"
      jer: Summer23BPixPrompt23_RunD_JRV1_MC
      junc: "${default_jets_calibration.jec_correctionlib.2022_preEE.junc}"

    "2024":
      json_path: "/cvmfs/cms.cern.ch/rsync/cms-nanoAOD/jsonpog-integration/POG/JME/2024_Summer24/jet_jerc.json.gz"
      jec_mc: Summer24Prompt24_V1_MC
      jec_data: Summer24Prompt24_V1_DATA
      jec_levels: "${default_jets_calibration.jec_correctionlib.2022_preEE.jec_levels}"
      jer: Summer23BPixPrompt23_RunD_JRV1_MC  # For the time being the 2023 jers shall be used https://cms-jerc.web.cern.ch/Recommendations/#2024_1
      junc: "${default_jets_calibration.jec_correctionlib.2022_preEE.junc}"



#####################################################################################
# Default jets calibration for the user used by the processor
# The user can overwrite `jets_calibration` to get the desired factory.
# The user can build it from the default factory configurations above

jets_calibration:
  factory_file: "./jets_calibrator_JES_JER_Syst.pkl.gz"
  jet_types:
    MC: 
      AK4PFchs: "${default_jets_calibration.factory_configuration_MC.AK4PFchs.JES_JER_Syst}" 
      AK4PFPuppi: "${default_jets_calibration.factory_configuration_MC.AK4PFPuppi.JES_JER_Syst}" 
      AK8PFPuppi: "${default_jets_calibration.factory_configuration_MC.AK8PFPuppi.JES_JER_Syst}"
    Data:
      # AK4PFchs: "${default_jets_calibration.factory_configuration_Data.AK4PFchs.JES}" 
      AK4PFPuppi: "${default_jets_calibration.factory_configuration_Data.AK4PFPuppi.JES}" 
    
  collection:  # this is needed to know which collection is corrected with which jet factory
    2016_PreVFP:
      AK4PFchs: "Jet"
      AK8PFPuppi: "FatJet"
    2016_PostVFP:
      AK4PFchs: "Jet"
      AK8PFPuppi: "FatJet"
    "2017":
      AK4PFchs: "Jet"
      AK8PFPuppi: "FatJet"
    "2018":
      AK4PFchs: "Jet"
      # AK8PFPuppi: "FatJet"
    2022_preEE:
      AK4PFPuppi: "Jet"
      #AK8PFPuppi: "FatJet"
    2022_postEE:
      AK4PFPuppi: "Jet"
      #AK8PFPuppi: "FatJet"
    2023_preBPix:
      AK4PFPuppi: "Jet"
      #AK8PFPuppi: "FatJet"
    2023_postBPix:
      AK4PFPuppi: "Jet"
      #AK8PFPuppi: "FatJet"
    "2024":
      AK4PFPuppi: "Jet"
    
  jec_name_map_MC: "${default_jets_calibration.jec_name_map_MC}"
  jec_name_map_Data: "${default_jets_calibration.jec_name_map_Data}"
  apply_jec_nominal:
    2016_PreVFP: False
    2016_PostVFP: False
    "2017": False
    "2018": False
    2022_preEE: True
    2022_postEE: True
    2023_preBPix: True
    2023_postBPix: True
    "2024": True

  rescale_MET:
    2016_PreVFP: False
    2016_PostVFP: False
    "2017": False
    "2018": False
    2022_preEE: True
    2022_postEE: True
    2023_preBPix: True
    2023_postBPix: True
    "2024": True

  rescale_MET_branch:
     2016_PreVFP: "MET"
     2016_PostVFP: "MET"
     "2017": "MET"
     "2018": "MET"
     2022_preEE:  "PuppiMET"
     2022_postEE: "PuppiMET"
     2023_preBPix: "PuppiMET"
     2023_postBPix: "PuppiMET"
     "2024": "PuppiMET"
